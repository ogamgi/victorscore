{@Context::addMetaTag('viewport', 'width=device-width, user-scalable=no', FALSE);}
<load target="./css/declare_comment.css" />
<form action="./" method="post" id="fo_component" ruleset="insertDeclare">
	<input type="hidden" name="module" value="comment" />
	<input type="hidden" name="act" value="procCommentDeclare" />
	<input type="hidden" name="target_srl" value="{$target_srl}" />
	<input type="hidden" name="success_return_url" value="{getUrl('', 'act', $act, 'target_srl', $target_srl)}" />
	<input type="hidden" name="xe_validator_id" value="modules/comment/tpl/1" />
	<div class="x_modal-header">
		<h1>{$lang->improper_comment_declare} <!--@if($type == 'cancel')-->{$lang->cmd_cancel}<!--@end--></h1>
	</div>
	<div class="x_modal-body x_form-horizontal" style="max-height:none">
		<blockquote>
			<section class="target_article">
				<h1>{$lang->replies}</h1>
				<p>{$target_comment->getSummary(200)}</p>
			</section>
		</blockquote>
		<div class="x_control-group">
			<label class="x_control-label" for="message_option">{$lang->improper_comment_declare_reason}</label>
			<div class="x_controls">
				<select name="message_option" id="message_option">
					<option loop="$lang->improper_comment_reasons => $key,$text" value="{$key}">{$text}</option>
				</select>
				<textarea name="declare_message" id="declare_message"></textarea>
				<p>{$lang->about_improper_comment_declare}<p>
			</div>
		</div>
		<div class="x_modal-footer">
			<span class="x_btn-group x_pull-right">
				<button type="submit" class="x_btn x_btn-primary">{$lang->cmd_submit}</button>
			</span>
		</div>
	</div>
</form>
<script cond="$XE_VALIDATOR_MESSAGE && $XE_VALIDATOR_ID == 'modules/comment/tpl/1'">
	alert("{$XE_VALIDATOR_MESSAGE}");
	window.close();
</script>
<script>
	(function($){
		$(function() {
			setFixedPopupSize();
			$('select[name="message_option"]').change(function(){
				if ($(this).val()==='others') {
					$('#declare_message').show();
				} else {
					$('#declare_message').hide();
				}
				setFixedPopupSize();
			});
		});
	})(jQuery);
</script>
